<!DOCTYPE html>
<html lang="en">
 <head>  
    <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Starter Page - ZenBlog Bootstrap Template</title>
<div th:replace="~{partials/head}"></div>
	<link rel="stylesheet" th:href="@{/css/postForm.css}"> 
	<link rel="stylesheet" href="https://cdn.ckeditor.com/ckeditor5/44.2.0/ckeditor5.css" crossorigin>
</head>
<body class="write-post-page">

<div th:replace="~{partials/header}"></div>

  <!-- Page Title -->
  <div class="page-title">
    <div class="container d-lg-flex justify-content-between align-items-center">
      <h1 class="mb-2 mb-lg-0">Write a New Post</h1>
      <nav class="breadcrumbs">
        <ol>
          <li><a href="index.html">Home</a></li>
          <li class="current">Write a Post</li>
        </ol>
      </nav>
    </div>
  </div><!-- End Page Title -->

  <main class="main">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8">

          <section id="write-post" class="write-post section">
            <div class="container">

             <div th:replace="~{post/_postForm (post=${post}, isEdit=false)}"></div>
             
            </div>
          </section><!-- /Write Post Section -->

        </div>
      </div>
    </div>
  </main>

</body>

<script>
window.addEventListener("beforeunload", function(event) {
    // 게시글 ID 가져오기 (post 객체가 있다면 ID를 가져옴)
    let postId = document.getElementById("postId")?.value; 
    let blogId = document.getElementById("blogId")?.value;

    if (postId) {
        // API 호출 (Fetch 비동기 요청)
        navigator.sendBeacon(`/blogs/${blogId}/posts/${postId}/delete`);
    }
});
</script>

</html>
